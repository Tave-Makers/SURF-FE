echo "🔍 커밋 메시지 규칙 검사 중..."

pnpm exec commitlint --edit "$1"
status=$?

if [ $status -ne 0 ]; then
  echo "❌ 커밋 메시지가 규칙에 맞지 않습니다."
  echo "👉 규칙 예시:"
  echo "   [feat][nickname]: 새로운 기능 추가 (#123)"
  echo "   [fix][nickname]: 버그 수정 (#99)"
  echo ""
  echo "📖 허용된 타입: feat, fix, refactor, style, format, docs, chore, add, del, test"
  exit 1
fi

echo "✅ 커밋 메시지 규칙 통과"